using HOTTGF;
using Game;
using HOTTUI.Menu;
using HOTTUI.Game;

internal class Test
{
    public static void Main(string[] args)
    {
        TileMap tileMap = new TileMap(100, 100, ';');
        Teleporteur teleporteur = new Teleporteur(new System.Numerics.Vector2(16, 15), new System.Numerics.Vector2(19, 15));
        Lever lever = new Lever(new System.Numerics.Vector2(20, 15));
        char[,] map = new char[,]
            {
                {'#', '#', '#','#', '#', '#','#', '#', '#','#', '#', '#','#', '#', '#','#', '#', '#','#', '#', '#','#', '#', '#','#', '#', '#', },
                {'#', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '#','#', '.', '.', '.', '.', '.', '.', '.', '#' },
                {'#', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '#','#', '.', '.', '.', '.', '.', '.', '.', '#'},
                {'#', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '#','#', '.', '.', '.', '.', '.', '.', '.', '#' },
                {'#', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '#','#', '.', '.', '.', '.', '.', '.', '.', '#' },
                {'#', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '#','#', '.', '.', '.', '.', '.', '.', '.', '#' },
                {'#', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '#' },
                {'#', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '#','#', '.', '.', '.', '.', '.', '.', '.', '#' },
                {'#', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '#','#', '.', '.', '.', '.', '.', '.', '.', '#'},
                {'#', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '#','#', '.', '.', '.', '.', '.', '.', '.', '#' },
                {'#', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '#','#', '.', '.', '.', '.', '.', '.', '.', '#' },
                {'#', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '#','#', '.', '.', '.', '.', '.', '.', '.', '#' },
                {'#', '.', '.', '.', '.', '.', '.', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '#','#', '.', '.', '.', '.', '.', '.', '.', '#' },
                {'#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '.', '#', '#', '#'},
                {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', '#', '.', '#','#', '.', '.', '.', '#', '.', '.', '.', '#' },
                {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', '#', '.', '#','#', '.', '/', '.', '#', '.', '.', '.', '#'},
                {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', '#', '.', '#','#', '.', '.', '.', '#', '.', '.', '.', '#' },
                {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', '#', '#', '#', '#', '.', '#','#', '#', '#', '#', '#', '.', '.', '.', '#' },
                {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', '#', '@', '.', '#', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '#' },
                {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', '#', '#', '#', '#', '.', '.','.', '.', '.', '.', '.', '.', '.', '.', '#' },
                {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', '#', '#', '#','#', '.', '.', '.', '.', '.', '.', '.', '#' },
                {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ','#', '#', '#','#', '.', '.', '.', '.', '.', '.', '.', '#'},
                {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', '#', '#', '#','#', '.', '.', '.', '.', '.', '.', '.', '#' },
                {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ','#', '#', '#','#', '.', '.', '.', '.', '.', '.', '.', '#' },
                {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', '#', '#', '#','#', '.', '.', '.', '.', '.', '.', '.', '#' },
                {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', '#', '#', '#','#', '.', '.', '.', '.', '.', '.', '.', '#' },
                {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ',' ', ' ', ' ', ' ', ' ', ' ', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#', '#'}
            };
        Player player = new Player(2, 2);
        Console.Clear();
        while (true)
        {
            
            List<char> list = new List<char>();
            list.Add('#');


            teleporteur.Draw(ConsoleColor.Green);

            teleporteur.Teleport(player);
            lever.Draw(ConsoleColor.Yellow);

            player.Draw(ConsoleColor.Blue);

            if (lever.IsPressed(player))
            {
                map[17, 20] = '.';
                map[18, 15] = '.';
            }
            else if (map[player.Y, player.X] == '@')
            {
                Console.Clear();
                break;
            }

            for (int y = 0; y < map.GetLength(0); y++)
            {
                for (int x = 0; x < map.GetLength(1); x++)
                {
                    Console.SetCursorPosition(x, y);
                    Console.Write(map[y, x]);
                }
            }
            lever.Draw(ConsoleColor.Yellow);
            teleporteur.Draw(ConsoleColor.Green);
            
            player.Draw(ConsoleColor.Blue);
            player.Update(map, list);
            
        }
        Tools.Color_Write(ConsoleColor.DarkGreen, "Congrats you have finish the level!");
    }
}
